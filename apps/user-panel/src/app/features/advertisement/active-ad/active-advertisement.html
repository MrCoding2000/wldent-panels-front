<lib-filter-bar></lib-filter-bar>
<lib-optional-card
  [optionalCardsSlideData]="activeAdvertisementData"
  [optionalCardTemplate]="optionalCardTemplate"
  [headerTitle]="i18n.translate('advertisement.active-ad')"
  [actionButtonTitle]="i18n.translate('optional-card.create-discount')"
  (actionClick)="onSetDiscountRequest($event)">
</lib-optional-card>

<ng-template #optionalCardTemplate let-slide>
  <section class="active-reason-container w-full">
    <section>
      <!--Cost-->
      <div class="flex justify-between">
        <button class="cursor-pointer" (click)="onEditAdvertisement(slide.id)">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path
              d="M2 16H3.2615L13.498 5.7635L12.2365 4.502L2 14.7385V16ZM1.404 17.5C1.14783 17.5 0.933167 17.4133 0.76 17.24C0.586667 17.0668 0.5 16.8522 0.5 16.596V14.8635C0.5 14.6197 0.546833 14.3873 0.6405 14.1663C0.734 13.9453 0.862833 13.7527 1.027 13.5885L13.6905 0.93075C13.8417 0.793416 14.0086 0.687333 14.1913 0.6125C14.3741 0.5375 14.5658 0.5 14.7663 0.5C14.9668 0.5 15.1609 0.535584 15.3488 0.60675C15.5367 0.677917 15.7032 0.791083 15.848 0.946249L17.0693 2.18275C17.2244 2.32758 17.335 2.49425 17.401 2.68275C17.467 2.87125 17.5 3.05975 17.5 3.24825C17.5 3.44942 17.4657 3.64133 17.397 3.824C17.3283 4.00683 17.2191 4.17383 17.0693 4.325L4.4115 16.973C4.24733 17.1372 4.05475 17.266 3.83375 17.3595C3.61275 17.4532 3.38033 17.5 3.1365 17.5H1.404ZM12.8562 5.14375L12.2365 4.502L13.498 5.7635L12.8562 5.14375Z"
              fill="#222222"/>
          </svg>
        </button>
        <div class="flex items-center">
          <small class="active-ad-cost mx-2">{{ slide.goodsCost | number }}</small>
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path
              d="M17.0417 10.0416V11.3749C17.0417 12.4795 16.1463 13.3749 15.0417 13.3749H12.0417C11.1213 13.3749 10.3751 12.6287 10.3751 11.7083C10.3751 10.7878 11.1213 10.0416 12.0417 10.0416C12.9622 10.0416 13.7084 10.7878 13.7084 11.7083V14.2916C13.7084 15.3962 12.813 16.2916 11.7084 16.2916H1.62506M4.95839 13.3749H6.62506C7.54554 13.3749 8.29173 12.6287 8.29173 11.7083C8.29173 10.7878 7.54554 10.0416 6.62506 10.0416C5.70459 10.0416 4.95839 10.7878 4.95839 11.7083V13.3749ZM4.95839 13.3749H3.62506C2.52049 13.3749 1.62506 12.4795 1.62506 11.3749V1.70825M4.95839 1.70825V5.74992C4.95839 6.85449 5.85382 7.74992 6.95839 7.74992H10.8751C11.9796 7.74992 12.8751 6.85449 12.8751 5.74992V1.70825M17.0417 7.54159H14.9584M8.91673 2.95825V3.37492"
              stroke="#0058CC" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </div>
      </div>
      <!--Existence-->
      <div class="flex justify-between my-4">
        <div>
          <lib-toggle-switch
            [title]="'کالا موجود است'"
            [checked]="slide.isExistenceGoods"
            (checkedChange)="onChangeAdExistenceStatus(slide.id)">
          </lib-toggle-switch>
        </div>
        <div class="flex items-center">
          <small class="active-ad-existence-number mx-2">{{ 120 }}</small>
          <svg xmlns="http://www.w3.org/2000/svg" width="15" height="16" viewBox="0 0 15 16" fill="none">
            <path
              d="M1.50006 4.58654V13.577C1.50006 13.6518 1.52409 13.7133 1.57214 13.7613C1.6202 13.8094 1.68166 13.8334 1.75652 13.8334H12.9103C12.9851 13.8334 13.0466 13.8094 13.0946 13.7613C13.1427 13.7133 13.1667 13.6518 13.1667 13.577V4.58654H10.2501V9.52258C10.2501 9.80994 10.1315 10.0268 9.89423 10.1732C9.65701 10.3195 9.41291 10.3285 9.16194 10.2003L7.33339 9.29008L5.50485 10.2003C5.25388 10.3285 5.00978 10.3195 4.77256 10.1732C4.53534 10.0268 4.41673 9.80994 4.41673 9.52258V4.58654H1.50006ZM1.75652 15.0834C1.34096 15.0834 0.985964 14.9363 0.691519 14.642C0.397214 14.3475 0.250061 13.9925 0.250061 13.577V3.83821C0.250061 3.65987 0.278672 3.48973 0.335894 3.32779C0.392978 3.16598 0.478672 3.01668 0.592978 2.87987L1.76298 1.46487C1.89964 1.2864 2.07055 1.15043 2.27569 1.05696C2.48082 0.963484 2.6977 0.916748 2.92631 0.916748H11.7244C11.953 0.916748 12.1712 0.963484 12.379 1.05696C12.5868 1.15043 12.7591 1.2864 12.8959 1.46487L14.0738 2.89591C14.1881 3.03272 14.2738 3.18335 14.3309 3.34779C14.3881 3.51237 14.4167 3.6839 14.4167 3.86237V13.577C14.4167 13.9925 14.2696 14.3475 13.9753 14.642C13.6808 14.9363 13.3258 15.0834 12.9103 15.0834H1.75652ZM1.82548 3.33675H12.8334L11.9246 2.25487C11.898 2.22821 11.8673 2.20682 11.8326 2.19071C11.7978 2.17473 11.7618 2.16675 11.7244 2.16675H2.93444C2.89708 2.16675 2.86096 2.17473 2.8261 2.19071C2.79138 2.20682 2.76069 2.22821 2.73402 2.25487L1.82548 3.33675ZM5.66673 4.58654V8.71321L7.33339 7.87987L9.00006 8.71321V4.58654H5.66673Z"
              fill="#222222"/>
          </svg>
        </div>
      </div>
    </section>
    <hr class="line">
    <!--Details-->
    <section class="details-container grid grid-cols-4 gap-4 mt-4">
      @for (detailItem of slide.activeAdDetails; track detailItem) {
        <div class="detail-container flex items-center justify-center gap-2">
          <span [innerHTML]="sanitizer.bypassSecurityTrustHtml(detailItem.icon)"></span>
          <span>{{ detailItem.count }}</span>
        </div>
      }
    </section>
  </section>
</ng-template>
